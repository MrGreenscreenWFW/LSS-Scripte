/*
 * @author     MrGreenscreen aka. TiBo
 * @category   Mission Chief
 *
 * Skript zur auflistung von KrankenhÃ¤usern mit Infos
 * Version: 1.0
 * 
 * 
 * @license    Attribution-NonCommercial-NoDerivs 4.0 Unported <http://creativecommons.org/licenses/by-nc-nd/4.0/>
 * Copyright Â© 2025
 * Alle Rechte vorbehalten.
 */


(async () => {
  const buildings = await (await fetch("/api/buildings")).json();

  const hospitals = buildings.filter(b => b.building_type === 4);

  if (hospitals.length === 0) {
    console.log("Keine KrankenhÃ¤user gefunden.");
    return;
  }

  for (const hospital of hospitals) {
    const details = await (await fetch(`/api/buildings/${hospital.id}`)).json();

    const ausbauten = details.extensions.map(ext => 
      `${ext.caption} (${ext.available ? "âœ”ï¸" : "âŒ"})`
    ).join(", ") || "Keine Ausbauten";

    const verbandFreigegeben = details.is_alliance_shared ? "âœ… freigegeben" : "âŒ nicht freigegeben";

    console.log(`ğŸ§± ${hospital.caption} (ID: ${hospital.id})`);
    console.log(`ğŸŒ Koordinaten: ${hospital.latitude}, ${hospital.longitude}`);
    console.log(`ğŸ¥ Ausbauten: ${ausbauten}`);
    console.log(`ğŸ¤ Verbandsfreigabe: ${verbandFreigegeben}`);
    console.log("------------------------------------------------------------");
  }
})();
